(()=>{"use strict";var e={174:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},513:(e,t,r)=>{e.exports=r.p+"3d4f16cb4bfc232ce3d8.png"},720:(e,t,r)=>{e.exports=r.p+"97fa275dc9b708dc8f8f.png"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.p="",r.b=document.baseURI||self.location.href,(()=>{var e=r(174),t=r.n(e),n=new URL(r(720),r.b),o=new URL(r(513),r.b),a=new URL(r(720),r.b);t()(n),t()(o),t()(a);var c,s,i,l,u,m;function d(e){return/\S\S+/.test(e.value)}function f(e,t,r){var n=r.submitButtonSelector,o=r.inactiveButtonClass,a=e.querySelector(n);e.checkValidity()&&d(t)?(a.classList.remove(o),a.removeAttribute("disabled")):(a.classList.add(o),a.setAttribute("disabled",!0))}s=(c={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"}).formSelector,i=c.inputSelector,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(c,["formSelector","inputSelector"]),u=document.querySelector(s),m=u.querySelector(i),u.addEventListener("submit",(function(e){e.preventDefault(),f(u,m,l)})),u.querySelectorAll(i).forEach((function(e){e.addEventListener("input",(function(){!function(e,t,r){t.validity.valid?d(t)&&function(e,t,r){var n=r.inputErrorClass,o=r.errorClass,a=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(n),a.classList.remove(o),a.textContent=""}(e,t,r):function(e,t,r,n){var o=n.inputErrorClass,a=n.errorClass,c=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o),c.classList.add(a),c.textContent=r}(e,t,t.validationMessage,r),f(e,t,r)}(u,e,l)}))}));const v=r.p+"2177d9efb4f2b78333fc.png",g=r.p+"f70f09a2722266120845.png",b=r.p+"32cc1a3545e04164f8fb.png",p=r.p+"c63ceb19a20abae9d2d9.png",_=r.p+"bf1b2ef9838827fcac0f.png",S=r.p+"b2c5418a4b41742651a9.png",y=r.p+"c169fdf09016829be7af.png";var k={"01":"января","02":"февраля","03":"марта","04":"апреля","05":"мая","06":"июня","07":"июля","08":"августа","09":"сентября",10:"октября",11:"ноября",12:"декабря"},L=function(){var e=(new Date).getHours();return e.toString().length<2?+("0"+e):e},h=function(){var e=(new Date).getMinutes();return e.toString().length<2?"0"+e:e};function q(e,t){var r=(new Date).getFullYear(),n=(new Date).getDate(),o=(new Date).getMonth(),a=L(),c=h(),s=e.slice(0,4),i=e.slice(5,7),l=e.slice(8,10),u=e.slice(11,13),m=e.slice(14,16);return r===+s&&n===+l&&o+1===+i?t?"Сегодня ".concat(u,":").concat(m):"Сегодня ".concat(a,":").concat(c):r===+s&&n-1==+l&&o+1===+i?t?"Вчера ".concat(u,":").concat(m):"Вчера ".concat(a,":").concat(c):t?"".concat(l," ").concat(k[i]," ").concat(s," ").concat(u,":").concat(m):"".concat(l," ").concat(k[i]," ").concat(s," ").concat(a,":").concat(c)}function E(e){"Enter"===e.key&&(e.preventDefault(),e.target.nextElementSibling.focus(),"SPAN"===e.target.nextElementSibling.nodeName&&e.target.nextElementSibling.nextElementSibling.focus())}var x=document.querySelectorAll(".form__input_active"),w=document.querySelector(".form__date"),O=document.querySelector(".form__user"),C=document.querySelector(".form__message"),D=document.querySelector(".form__button"),A=document.forms.commentForm,N=document.querySelector(".comments"),j=document.querySelector(".greeting");function I(e){e.target.classList.toggle("comment__like_active");var t=e.target.closest(".comment").dataset.id,r=JSON.parse(localStorage.getItem(t));r.isLiked=!r.isLiked,localStorage.setItem(t,JSON.stringify(r))}x.forEach((function(e){e.addEventListener("keypress",E)})),w.valueAsDate=new Date;var M=document.querySelector("#tmpl-comments").content,P=0;function B(e,t,r,n){var o=M.cloneNode(!0),a=o.querySelector(".comment");t?a.dataset.id=r:(P++,a.dataset.id=P),function(e){switch(Math.floor(7*Math.random())+1){case 1:e.src=v;break;case 2:e.src=g;break;case 3:e.src=b;break;case 4:e.src=p;break;case 5:e.src=_;break;case 6:e.src=S;break;case 7:e.src=y}}(o.querySelector(".comment__avatar")),o.querySelector(".comment__date").textContent=e.date,o.querySelector(".comment__name").textContent=e.name,o.querySelector(".comment__message").textContent=e.message;var c=o.querySelector(".comment__like"),s=o.querySelector(".comment__delete");return c.addEventListener("click",I),s.addEventListener("click",(function(){var e,t;t=(e=s).closest(".comment").dataset.id,localStorage.removeItem(t),e.closest(".comment").remove(),0===localStorage.length&&(j.classList.add("greeting_visible"),P=0)})),n?c.classList.add("comment__like_active"):c.classList.remove("comment__like_active"),o}function J(e,t,r,n){var o=B(e,t,r,n);return N.prepend(o),o}A.addEventListener("submit",(function(e){e.preventDefault(),J({date:q(w.value),name:O.value,message:C.value},!1);var t,r,n=N.firstElementChild;localStorage.setItem(n.dataset.id,JSON.stringify({key:n.dataset.id,date:w.value+(t=L(),r=h()," ".concat(t,":").concat(r)),name:O.value,message:C.value,isLiked:!1})),j.classList.remove("greeting_visible"),D.setAttribute("disabled",!0),A.reset(),D.blur(),w.valueAsDate=new Date})),window.onload=function(){var e;(e=[],Object.keys(localStorage).forEach((function(t){e.push(JSON.parse(localStorage.getItem(t)))})),0===e.length&&(j.classList.add("greeting_visible"),P=0),e.sort((function(e,t){return e.key-t.key}))).forEach((function(e){P=e.key,J({date:q(e.date,!0),name:e.name,message:e.message},!0,e.key,e.isLiked)})),D.setAttribute("disabled",!0)}})()})();