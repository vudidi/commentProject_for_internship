(()=>{"use strict";var e={174:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},513:(e,t,n)=>{e.exports=n.p+"3d4f16cb4bfc232ce3d8.png"},720:(e,t,n)=>{e.exports=n.p+"97fa275dc9b708dc8f8f.png"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="",n.b=document.baseURI||self.location.href,(()=>{var e=n(174),t=n.n(e),r=new URL(n(720),n.b),o=new URL(n(513),n.b),a=new URL(n(720),n.b);t()(r),t()(o),t()(a);var c,s,i,l,u,m;function d(e){return/\S\S+/.test(e.value)}function f(e,t,n){var r=n.submitButtonSelector,o=n.inactiveButtonClass,a=e.querySelector(r);e.checkValidity()&&d(t)?(a.classList.remove(o),a.removeAttribute("disabled")):(a.classList.add(o),a.setAttribute("disabled",!0))}s=(c={formSelector:".form",inputSelector:".form__input_active",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"}).formSelector,i=c.inputSelector,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(c,["formSelector","inputSelector"]),u=document.querySelector(s),m=u.querySelector(i),u.addEventListener("submit",(function(e){e.preventDefault(),f(u,m,l)})),u.querySelectorAll(i).forEach((function(e){e.addEventListener("input",(function(){!function(e,t,n){t.validity.valid?d(t)&&function(e,t,n){var r=n.inputErrorClass,o=n.errorClass,a=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r),a.classList.remove(o),a.textContent=""}(e,t,n):function(e,t,n,r){var o=r.inputErrorClass,a=r.errorClass,c=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o),c.classList.add(a),c.textContent=n}(e,t,t.validationMessage,n),f(e,t,n)}(u,e,l)}))}));const v=n.p+"2177d9efb4f2b78333fc.png",g=n.p+"f70f09a2722266120845.png",b=n.p+"32cc1a3545e04164f8fb.png",p=n.p+"c63ceb19a20abae9d2d9.png",S=n.p+"bf1b2ef9838827fcac0f.png",_=n.p+"b2c5418a4b41742651a9.png",y=n.p+"c169fdf09016829be7af.png";var h={"01":"января","02":"февраля","03":"марта","04":"апреля","05":"мая","06":"июня","07":"июля","08":"августа","09":"сентября",10:"октября",11:"ноября",12:"декабря"};function L(e){var t=new Date;e.value=t.toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit"})}var k=function(){var e=(new Date).getHours();return e.toString().length<2?"0"+e:e},E=function(){var e=(new Date).getMinutes();return e.toString().length<2?"0"+e:e};function q(e,t){var n=(new Date).getFullYear(),r=(new Date).getDate(),o=(new Date).getMonth(),a=k(),c=E(),s=e.slice(0,4),i=e.slice(5,7),l=e.slice(8,10),u=e.slice(11,13),m=e.slice(14,16);return n===+s&&r===+l&&o+1===+i?t?"Сегодня ".concat(u,":").concat(m):"Сегодня ".concat(a,":").concat(c):n===+s&&r-1==+l&&o+1===+i?t?"Вчера ".concat(u,":").concat(m):"Вчера ".concat(a,":").concat(c):t?"".concat(l," ").concat(h[i]," ").concat(s," ").concat(u,":").concat(m):"".concat(l," ").concat(h[i]," ").concat(s," ").concat(a,":").concat(c)}function C(e){"Enter"===e.key&&(e.preventDefault(),e.target.nextElementSibling.focus(),"SPAN"===e.target.nextElementSibling.nodeName&&e.target.nextElementSibling.nextElementSibling.focus())}var x=document.querySelectorAll(".form__input_active"),O=document.getElementById("date"),w=document.querySelector(".form__user"),D=document.querySelector(".form__message"),N=document.querySelector(".form__button"),I=document.forms.commentForm,A=document.querySelector(".comments"),M=document.querySelector(".greeting");function j(e){e.target.classList.toggle("comment__like_active");var t=JSON.parse(localStorage.getItem("localComments")),n=e.target.closest(".comment").dataset.id;t.forEach((function(e){e.key===n&&(e.isLiked=!e.isLiked)})),localStorage.setItem("localComments",JSON.stringify(t))}x.forEach((function(e){e.addEventListener("keypress",C)})),L(O);var J=document.querySelector("#tmpl-comments").content,B=0;function P(e,t,n,r){var o=J.cloneNode(!0),a=o.querySelector(".comment");t?a.dataset.id=n:(B++,a.dataset.id=B),function(e){switch(Math.floor(7*Math.random())+1){case 1:e.src=v;break;case 2:e.src=g;break;case 3:e.src=b;break;case 4:e.src=p;break;case 5:e.src=S;break;case 6:e.src=_;break;case 7:e.src=y}}(o.querySelector(".comment__avatar")),o.querySelector(".comment__date").textContent=e.date,o.querySelector(".comment__name").textContent=e.name,o.querySelector(".comment__message").textContent=e.message;var c=o.querySelector(".comment__like"),s=o.querySelector(".comment__delete");return c.addEventListener("click",j),s.addEventListener("click",(function(){!function(e){var t=e.closest(".comment").dataset.id;e.closest(".comment").remove();var n=JSON.parse(localStorage.getItem("localComments")),r=[];n.forEach((function(e){e.key!==t&&r.push(e)})),localStorage.setItem("localComments",JSON.stringify(r)),0===r.length&&(M.classList.add("greeting_visible"),B=0)}(s)})),r?c.classList.add("comment__like_active"):c.classList.remove("comment__like_active"),o}function R(e,t,n,r){var o=P(e,t,n,r);return A.prepend(o),o}var U=[];I.addEventListener("submit",(function(e){e.preventDefault(),R({date:q(O.value),name:w.value,message:D.value},!1);var t,n,r={key:A.firstElementChild.dataset.id,date:O.value+(t=k(),n=E()," ".concat(t,":").concat(n)),name:w.value,message:D.value,isLiked:!1};U.push(r),localStorage.setItem("localComments",JSON.stringify(U)),M.classList.remove("greeting_visible"),N.setAttribute("disabled",!0),I.reset(),N.blur(),L(O)})),window.onload=function(){var e;(e=JSON.parse(localStorage.getItem("localComments")))&&0!==e.length?e&&e.forEach((function(e){B=e.key,U.push(e),R({date:q(e.date,!0),name:e.name,message:e.message},!0,e.key,e.isLiked)})):(M.classList.add("greeting_visible"),B=0),N.setAttribute("disabled",!0)}})()})();